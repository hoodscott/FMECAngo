<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    
    <title>FMECAngo: {% block title_block %}{% endblock %}</title>
    
    <!-- Bootstrap -->
    <link href="{% static 'css/bootstrap.min.css'%}" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- css files go here -->
    <!--link href="{% static 'css/fmecango.css'%}" rel="stylesheet"-->
    
    <!-- extra stylesheets can go here -->
    {% block head_block%}{% endblock%}
    
  </head>
  <body>
    <h1>Table</h1>
    {% for component in components %}
      <h5>{{component}}</h5>
        {% for fault in component.failuremode_set.all %}
          {{fault}}
        {% empty %}
          <p>NO failure modes have been identified</p>
        {% endfor %}
    {% empty %}
      <h3>No components have been added</h3>
    {% endfor %}

    
    
    <h1>New Component</h1>
    <form role="form" action="{% url 'table' table.slug %}" method="post" class="form-horizontal">
      {% for hidden in component_form.hidden %}
      {{ hidden }}
      {% endfor %}
      
      {% csrf_token %}
      <div class="form-group">
        <label class="control-label col-sm-2" for="email">Name of Component:</label>
        <div class="col-sm-10">
          {{ component_form.name }}{{ component_form.name.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Brief Description of its purpose:</label>
        <div class="col-sm-10">
          {{ component_form.function }}{{ component_form.function.errors }}
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" name="component" class="btn btn-default">Submit</button>
        </div>
      </div>
    </form>
    
    
    {% if components %}
    <h1>New Failure</h1>
    <form role="form" action="{% url 'table' table.slug %}" method="post" class="form-horizontal">
      {% for hidden in failuremode_form.hidden %}
      {{ hidden }}
      {% endfor %}
      
      {% csrf_token %}
      <div class="form-group">
        <label class="control-label col-sm-2" for="email">Component</label>
        <div class="col-sm-10">
          {{ failuremode_form.component }}{{ failuremode_form.component.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="email">Name of Failure Mode:</label>
        <div class="col-sm-10">
          {{ failuremode_form.name }}{{ failuremode_form.name.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Cause of Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.cause }}{{ failuremode_form.cause.errors }}
        </div>
      </div>
            <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Effect of Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.effect }}{{ failuremode_form.effect.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Severity of Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.severity }}{{ failuremode_form.severity.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Occurence of Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.occurence }}{{ failuremode_form.occurence.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Detection of Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.detection }}{{ failuremode_form.detection.errors }}
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="pwd">Notes on Failure:</label>
        <div class="col-sm-10">
          {{ failuremode_form.notes }}{{ failuremode_form.notes.errors }}
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" name="failuremode" class="btn btn-default">Submit</button>
        </div>
      </div>
    </form>
    {% else %}
    <h3>No components added yet</h3>
    {% endif %}
    
    <hr>
    
    todo put forms in modal
    format table
    style
    
    <!-- Trigger the modal with a button -->
    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
  
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
    
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Modal Header</h4>
          </div>
          <div class="modal-body">
            <p>Some text in the modal.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
    
      </div>
    </div>
    
    <!-- Put your page content here! -->
    {% block body_block %}{% endblock %}
    
    <!-- jQuery -->
    <script src="{% static 'js/jquery-1.12.1.min.js' %}"></script>
      
    <!-- Bootstrap Core JavaScript -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    
    <!-- Other Scripts go here -->
    {% block js_block %}{% endblock %}
    
  </body>
</html>